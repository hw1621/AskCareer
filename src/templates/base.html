<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="google-signin-client_id"
          content="1067444981581-lmgjcqdqb7i9g17ai0fhdh6nind11ljo.apps.googleusercontent.com">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    {% if current_user.is_authenticated %}
        <meta name="user_profile_id" content="{{ current_user.profile_id }}">
    {% endif %}
    <title>{% block title %}Platform{% endblock %}</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"
            integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r"
            crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.0.1/socket.io.js" integrity="sha512-q/dWJ3kcmjBLU4Qc47E4A9kTB4m3wuTY7vkFJDTZKjTs8jhyGQnaUrxa0Ytd0ssMZhbNua9hE+E7Qv1j+DyZwA==" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
    <link href="{{ url_for('static', filename='css/base.css') }}" rel="stylesheet">
    {% block stylesheets %}{% endblock %}
</head>
<body>
    <nav>
    <div id="navbarNav">
        <div class="navbar-left">
            <a href="https://drp26.herokuapp.com/">
                <img src="{{ url_for('static', filename='img/logo-no-bg.png') }}" class="header-logo" alt="ASKareers">
            </a>
        </div>
        <div class="navbar-right">
            {% if current_user.is_authenticated %}
                <div class="navbar-item dropdown">
                <div class="dropbtn" id="chat-drop">
                    <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
                         viewBox="0 0 260 260" xml:space="preserve" width="25pt" height="25pt">
                    <g id="navbar-msg-icon">
                        <radialGradient id="SVGID_1_" cx="121.8952" cy="142.7198" r="96.9" gradientUnits="userSpaceOnUse">
                            <stop  offset="0" style="stop-color:#1F1F19"></stop>
                            <stop  offset="0.7291" style="stop-color:#1B1B14"></stop>
                            <stop  offset="1" style="stop-color:#1B1B14"></stop>
                        </radialGradient>
                        <path style="fill:url(#SVGID_1_);" d="M222.1,136.9c0,48.4-44.9,87.7-100.2,87.7c-9.9,0-19.8-1.3-29.4-3.8c-7.3,3.7-24.1,10.8-52.4,15.5
                            c-2.5,0.4-4.4-2.2-3.4-4.5c4.4-10.5,8.4-24.4,9.6-37.1c-15.3-15.4-24.7-35.6-24.7-57.6c0-48.4,44.9-87.7,100.2-87.7
                            S222.1,88.5,222.1,136.9z M84.3,136.9c0-6.9-5.6-12.5-12.5-12.5c-6.9,0-12.5,5.6-12.5,12.5s5.6,12.5,12.5,12.5
                            C78.7,149.4,84.3,143.8,84.3,136.9z M134.4,136.9c0-6.9-5.6-12.5-12.5-12.5c-6.9,0-12.5,5.6-12.5,12.5s5.6,12.5,12.5,12.5
                            C128.8,149.4,134.4,143.8,134.4,136.9z M172,149.4c6.9,0,12.5-5.6,12.5-12.5s-5.6-12.5-12.5-12.5s-12.5,5.6-12.5,12.5
                            S165.1,149.4,172,149.4z"></path>
                    </g>
                    <g id="navbar-msg-badge" style="display: none">
                        <radialGradient id="SVGID_2_" cx="206.3728" cy="53.9698" r="34.3835" gradientUnits="userSpaceOnUse">
                            <stop  offset="0" style="stop-color:#35b9f3"></stop>
                            <stop  offset="0.5145" style="stop-color:#33a8f1"></stop>
                            <stop  offset="1" style="stop-color:#35a5f5"></stop>
                        </radialGradient>
                        <circle cx="206.4" cy="54" r="54" style="fill:url(#SVGID_2_);"></circle>
                        <text transform="matrix(1 0 0 1 207 75.0418)" style="font-family: 'MyriadPro-Regular', sans-serif; font-size: 60px; font-weight: bolder; text-anchor: middle; text-align: center; fill: black;" id="navbar-badge-num-unread"></text>
                    </g>
                    </svg>
                </div>
                <div class="dropdown-content dropdown-content-long" id="chat-drop-content">
                    <div id="empty-message">No messages yet!</div>
                </div>
                </div>
                <div class="navbar-item dropdown">
                <div class="dropbtn">
                    <img src="" class="profile-photo-in-chat" id="profile-photo-in-navbar">
                    <script>
                        var myProfileId = "{{current_user.profile_id}}"
                        const backend_url = 'https://drp26backend.herokuapp.com/profiles/' + myProfileId;
                        fetch(backend_url).then(function getJson(response) {
                        console.assert(response.ok, 'Response was not ok.');
                        return response.json();
                        }).then(function writeData(data) {
                        var image_url = data['profilePhotoString'];
                        return image_url;
                        }).then((image_url) => {
                        document.getElementById("profile-photo-in-navbar").src = image_url;})
                    </script>
                </div>
                <div class="dropdown-content">

                    <a href="https://drp26.herokuapp.com/edit-profile">
                        <i class="bi bi-person-circle"></i>
                        &nbsp;
                        Profile
                    </a>
                    <a href="https://drp26.herokuapp.com/settings">
                        <i class="bi bi-gear"></i>
                        &nbsp;
                        Settings
                    </a>
                    <a href="https://drp26.herokuapp.com/signout">
                        <i class="bi bi-box-arrow-left"></i>
                        &nbsp;
                        Sign out
                    </a>
                </div>
                </div>
            {% endif %}
            <script src="{{ url_for('static', filename='js/navbar.js') }}"></script>
        </div>
    </div>
    </nav>
    <div class="background-grad"></div>
    <div id="profile-modal">
        <div class="dialog-content">
            <div class="dialog-body">
                <div class="dialog-header">
                    <button type="button" class="btn-close" onclick="hideProfile()" aria-label="Close"></button>
                </div>
                <div class="profile-header">
                    <div><img src="" id="profile-image" class="profile-image" alt="Profile Image"></div>
                    <div class="profile-header-info">
                        <div id="profile-name"></div>
                        <div id="profile-email"></div>
                        <div id="chat-button">
                            <button type="button" class="btn btn-primary" tabindex="1" autofocus onclick="openChatBox()" id="chatbtn">Chat!</button>
                        </div>
                    </div>
                </div>
                <div id="profile-info">
                    <div style="font-size: 25px;">Education</div>
                    <div id="education"></div>
                    <div style="font-size: 25px;">Work Experience</div>
                    <div id="work-experience"></div>
                </div>
            </div>
        </div>
        <script src="{{ url_for('static', filename='js/profileModal.js') }}"></script>
    </div>
{% block body %}{% endblock %}
{% block javascripts %}{% endblock %}
{% if current_user.is_authenticated %}
<div id="chat-modal">
    <div class="chat-header-container">
        <div class="chat-header-left" id="chat-header-left">
            <img src="" class="profile-photo-in-chat" id="profile-photo-in-chat" alt="">
        </div>
        <div class="chat-header-right">
            <button type="button" id="chat-modal-btn" class="chat-collapsible">
                <i class="bi bi-chevron-double-up" id="chat-modal-updown-symbol"></i>
                <span>&nbsp;</span>
                <span id="chat-name">Chat</span>
            </button>
        </div>
    </div>
        <div class="chat-content" id="chat-content">
            <div class="chat-content-inside">
                <div class="chat-message-div" id="chat-message-div">
                </div>
                <div class="send-box">
                    <div style="width: 85%; display: flex; justify-content: center">
                        <label style="width: 100%; margin: auto;"><input class="textarea" type="text" id="send-box-text"></label>
                    </div>
                    <div>
                        <button class="btn send-btn" onclick="sendMsg()"><i class="bi bi-send send-icon" ></i></button>
                    </div>
                </div>
            </div>
        </div>
        <script src="{{ url_for('static', filename='js/chat.js') }}"></script>
    </div>
{% endif %}
</body>
</html>
